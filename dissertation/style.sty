\ProvidesPackage{style}

\usepackage[inner=3cm,outer=2cm,bottom=1.5in]{geometry}

\tolerance 1414
\hbadness 1414
\emergencystretch 1.5em
\hfuzz 0.3pt
\widowpenalty=10000
\vfuzz \hfuzz
\raggedbottom

\newcommand{\lwip}{{\scshape lw}IP}

\usepackage{ amssymb }
\usepackage{ amsmath }
\usepackage{centernot}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{textcomp}

\newcommand{\notimplies}{\centernot\implies}

\usepackage[
  backend=biber,
  style=numeric,
  sorting=nyt
]{biblatex}

\usepackage{hyperref}

\usepackage{mathpazo}

\usepackage{graphicx}

\usepackage{titlesec}

\usepackage{blindtext}

\usepackage[T1]{fontenc}
\usepackage{titlesec, blindtext}
\usepackage[usenames,dvipsnames]{xcolor}
\definecolor{gray75}{gray}{0.75}
\newcommand{\hsp}{\hspace{20pt}}
\titleformat{\chapter}[hang]
  {\Huge\bfseries}{\thechapter\hsp\textcolor{gray75}{|}\hsp}{0pt}{\Huge\bfseries}

% \newpagestyle{mystyle}{%
%   \headrule\sethead{}{}{\chaptertitle}
%   \setfoot{}{\thepage}{}}
\usepackage{fancyhdr}
\fancypagestyle{mystyle}{%
  \fancyhf{}%
  \fancyhead[EL]{\leftmark}%
  \fancyhead[OR]{\leftmark}%
  \fancyfoot[C]{\thepage}
}
\pagestyle{mystyle}
\renewcommand{\chaptermark}[1]{\markboth{\MakeUppercase{#1}}{}}

\usepackage{afterpage}
\newcommand\blankpage{%
    \null
    \thispagestyle{empty}%
    \addtocounter{page}{-1}%
    \newpage}

\usepackage{tikz}
\usetikzlibrary{arrows,automata,positioning,fit,calc,shadows}

\usepackage{csquotes}

\tikzstyle{msourcefile}=[%
draw,
rounded corners,
align=center,
color=black,
minimum width=10mm,
minimum height=14.1mm,
shape=rectangle,
double copy shadow={shadow xshift=0.5ex,shadow yshift=-0.5ex,draw=black!30},
fill=white,
draw=black,
thick,
font=\footnotesize
]

\tikzstyle{code}=[%
  draw,
  rounded corners,
]

\tikzstyle{sourcefile}=[%
draw,
rounded corners,
align=center,
color=black,
minimum width=10mm,
minimum height=14.1mm,
shape=rectangle,
fill=white,
draw=black,
thick,
font=\footnotesize
]

\tikzstyle{instr}=[%
draw,
align=center,
color=black,
inner sep=0.5em,
rounded corners
]

\tikzstyle{multiple}=[%
]

\tikzset{multiple/.style = {double copy shadow={shadow xshift=1ex,shadow
         yshift=-1.5ex,draw=black!30},fill=white,draw=black,thick,minimum height = 1cm,minimum
           width=2cm},
         ordinary/.style = {rectangle,draw,thick,minimum height = 1cm,minimum width=2cm}}

\makeatletter
\newcommand{\settowidthofnode}[2]{%
  \pgfpointanchor{#2}{center}%
  \unskip
  \setlength{#1}{\pgf@x}%
  \pgfpointanchor{#2}{text}
  \unskip
  \addtolength{#1}{-\pgf@x}%
  \addtolength{#1}{#1}%
}%
\newcommand{\shrinktowidthofnode}[2]{%
  \begingroup
  \settowidthofnode{\pgf@xb}{#2}%
  \resizebox{\pgf@xb}{!}{#1}%
  \endgroup
}%
\makeatother

\usepackage{listings}
\lstset{
  basicstyle=\small\ttfamily,
  breaklines=true,
  frame=single,
  keywordstyle=\color{Mahogany},
  language=C,
}

\usepackage[chapter]{minted}
\usemintedstyle{friendly}
\setminted{
  breaklines=true,
  linenos=true,
  samepage=true,
}
\providecommand*{\listingautorefname}{Listing}

\usepackage{tabularx}
\usepackage{booktabs}
\usepackage{array}
\newcolumntype{Z}{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}X}

\newtheorem{definition}{Definition}[chapter]
\usepackage[group-separator={,}]{siunitx}

\usepackage{pgfplots,filecontents}
\pgfplotsset{compat=newest}

\makeatletter
\def\pgfutil@firstofmany#1#2\pgf@stop{#1}
\def\pgfutil@secondofmany#1#2\pgf@stop{#2}
\def\tikz@lib@place@of@#1#2#3{%
  \def\pgf@tempa{fit bounding box}%
  \edef\pgf@temp{\expandafter\pgfutil@firstofmany#2\pgf@stop}
  \if\pgf@temp(%
    \tikz@lib@place@fit@scan{#2}{0}%
  \else\if\pgf@temp|
      \expandafter\tikz@lib@place@fit@scan\expandafter{\pgfutil@secondofmany#2\pgf@stop}{1}%
    \else\ifx\pgf@temp\tikz@activebar
        \expandafter\tikz@lib@place@fit@scan\expandafter{\pgfutil@secondofmany#2\pgf@stop}{1}%
      \else\if\pgf@temp-
          \expandafter\tikz@lib@place@fit@scan\expandafter{\pgfutil@secondofmany#2\pgf@stop}{2}%
        \else\if\pgf@temp+
            \expandafter\tikz@lib@place@fit@scan\expandafter{\pgfutil@secondofmany#2\pgf@stop}{3}%
          \else
            \def\pgf@tempa{#2}%
          \fi
        \fi
      \fi
    \fi
  \fi
  \expandafter\tikz@scan@one@point\expandafter\tikz@lib@place@remember\expandafter(\pgf@tempa)%
  \iftikz@shapeborder%
    % Ok, this is relative to a border.
    \iftikz@lib@ignore@size%
      \edef\tikz@node@at{\noexpand\pgfpointanchor{\tikz@shapeborder@name}{center}}%
      \def\tikz@anchor{center}%
    \else%
      \edef\tikz@node@at{\noexpand\pgfpointanchor{\tikz@shapeborder@name}{#3}}%
    \fi%
  \fi%
  \edef\tikz@lib@place@nums{#1}%
}
\def\tikz@lib@place@fit@scan#1#2{
  \pgf@xb=-16000pt\relax%
  \pgf@xa=16000pt\relax%
  \pgf@yb=-16000pt\relax%
  \pgf@ya=16000pt\relax%
  \if\pgfutil@firstofmany#1\pgf@stop(%
    \tikz@lib@fit@scan#1\pgf@stop%
  \else
    \tikz@lib@fit@scan(#1)\pgf@stop
  \fi
  \ifdim\pgf@xa>\pgf@xa
    % shouldn't happen
  \else
     \expandafter\def\csname pgf@sh@ns@fit bounding box\endcsname{rectangle}%
     \expandafter\edef\csname pgf@sh@np@fit bounding box\endcsname{%
       \def\noexpand\southwest{\noexpand\pgfqpoint{\the\pgf@xa}{\the\pgf@ya}}%
       \def\noexpand\northeast{\noexpand\pgfqpoint{\the\pgf@xb}{\the\pgf@yb}}%
     }%
     \expandafter\def\csname pgf@sh@nt@fit bounding box\endcsname{{1}{0}{0}{1}{0pt}{0pt}}%
     \expandafter\def\csname pgf@sh@pi@fit bounding box\endcsname{\pgfpictureid}%
     \ifcase#2\relax
     \or % 1 = vertical
       \pgf@y=\pgf@yb%
       \advance\pgf@y by-\pgf@ya%
       \edef\pgf@marshal{\noexpand\tikzset{minimum height={\the\pgf@y-2*(\noexpand\pgfkeysvalueof{/pgf/outer ysep})}}}%
       \pgf@marshal
     \or % 2 = horizontal
       \pgf@x=\pgf@xb%
       \advance\pgf@x by-\pgf@xa%
       \edef\pgf@marshal{\noexpand\tikzset{minimum width={\the\pgf@x-2*(\noexpand\pgfkeysvalueof{/pgf/outer xsep})}}}%
       \pgf@marshal
     \or % 3 = both directions
       \pgf@y=\pgf@yb%
       \advance\pgf@y by-\pgf@ya%
       \pgf@x=\pgf@xb%
       \advance\pgf@x by-\pgf@xa%
       \edef\pgf@marshal{\noexpand\tikzset{minimum height={\the\pgf@y-2*(\noexpand\pgfkeysvalueof{/pgf/outer ysep})},minimum width={\the\pgf@x-2*(\noexpand\pgfkeysvalueof{/pgf/outer xsep})}}}%
       \pgf@marshal
     \fi
  \fi
}
\tikzset{
  fit bounding box/.code={\tikz@lib@place@fit@scan{#1}{0}},
  span vertical/.code={\tikz@lib@place@fit@scan{#1}{1}},
  span horizontal/.code={\tikz@lib@place@fit@scan{#1}{2}},
  span/.code={\tikz@lib@place@fit@scan{#1}{3}}}

\makeatother

\usepgfplotslibrary{colorbrewer}
\usepackage{pgfplotstable}

\makeatletter
\pgfplotsset{
    /pgfplots/flexible xticklabels from table/.code n args={3}{%
        \pgfplotstableread[#3]{#1}\coordinate@table
        \pgfplotstablegetcolumn{#2}\of{\coordinate@table}\to\pgfplots@xticklabels
        \let\pgfplots@xticklabel=\pgfplots@user@ticklabel@list@x
    }
}
\makeatother

\renewcommand\topfraction{0.85}
\renewcommand\bottomfraction{0.85}
\renewcommand\textfraction{0.1}
\renewcommand\floatpagefraction{0.85}
